// Generated by CoffeeScript 1.7.1
(function() {
  var $, Links, hasAttr;

  $ = null;

  hasAttr = function(el, name) {
    var attr;
    attr = $(el).attr(name);
    return typeof attr !== 'undefined' && attr !== false;
  };

  Links = (function() {
    Links.HISTORY_API_ATTRIBUTE = 'data-history-api';

    Links.prototype.http = null;

    function Links(jQuery) {
      var historyApi;
      $ = jQuery;
      historyApi = Http.isHistoryApiSupported();
      $(document).on('click', 'a.ajax:not(.not-ajax)', (function(_this) {
        return function(e) {
          var a, link;
          e.preventDefault();
          a = e.target.nodeName.toLowerCase() === 'a' ? $(e.target) : $(e.target).closest('a');
          link = a.attr('href');
          if (historyApi && hasAttr(a, Links.HISTORY_API_ATTRIBUTE)) {
            window.history.pushState({}, null, link);
          }
          if (_this.http === null) {
            throw new Error('Please add Links extension into http object with addExtension method.');
          }
          return _this.http.get(link);
        };
      })(this));
    }

    return Links;

  })();

  module.exports = Links;

}).call(this);
