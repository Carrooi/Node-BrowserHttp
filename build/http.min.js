!function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return o(n?n:t)},p,p.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){function n(){this.error=!1,this.sent=!1,this.requestHeaders={},this.responseHeaders={}}function r(t){t&&(this.handle=t)}n.prototype={statusReasons:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",507:"Insufficient Storage"},UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,readyState:0,open:function(t,e,n,r,o){if("string"!=typeof t)throw"INVALID_METHOD";switch(t.toUpperCase()){case"CONNECT":case"TRACE":case"TRACK":throw"SECURITY_ERR";case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":t=t.toUpperCase()}if(this.method=t,"string"!=typeof e)throw"INVALID_URL";this.url=e,this.urlParts=this.parseUri(e),void 0===n&&(n=!0),this.async=n,this.user=r,this.password=o,this.readyState=this.OPENED,this.onreadystatechange()},setRequestHeader:function(t,e){switch(t=t.toLowerCase()){case"accept-charset":case"accept-encoding":case"connection":case"content-length":case"cookie":case"cookie2":case"content-transfer-encoding":case"date":case"expect":case"host":case"keep-alive":case"referer":case"te":case"trailer":case"transfer-encoding":case"upgrade":case"user-agent":case"via":return}if("proxy-"!==t.substr(0,6)&&"sec-"!==t.substr(0,4))if(void 0===this.requestHeaders[t])this.requestHeaders[t]=e;else{var n=this.requestHeaders[t];this.requestHeaders[t]=n+", "+e}},send:function(t){if(this.readyState!==this.OPENED||this.sent)throw"INVALID_STATE_ERR";("GET"===this.method||"HEAD"===this.method)&&(t=null),this.error=!1,this.sent=!0,this.onreadystatechange(),this.requestText=t,this.onsend()},abort:function(){this.responseText=null,this.error=!0;for(var t in this.requestHeaders)delete this.requestHeaders[t];delete this.requestText,this.onreadystatechange(),this.onabort(),this.readyState=this.UNSENT},status:0,statusText:"",getResponseHeader:function(t){return this.readyState===this.UNSENT||this.readyState===this.OPENED||this.error?null:this.responseHeaders[t.toLowerCase()]},getAllResponseHeaders:function(){var t="";for(var e in this.responseHeaders)"set-cookie"!==e&&"set-cookie2"!==e&&(t+=e+": "+this.responseHeaders[e]+"\r\n");return t},responseText:"",responseXML:void 0,onload:function(){},onprogress:function(){},onerror:function(){},onabort:function(){},onreadystatechange:function(){},onsend:function(){},getRequestHeader:function(t){return this.requestHeaders[t.toLowerCase()]},setResponseHeader:function(t,e){this.responseHeaders[t.toLowerCase()]=e},makeXMLResponse:function(t){var e,n=this.getResponseHeader("Content-Type");if(n=n&&n.split(";",1)[0],null==n||"text/xml"==n||"application/xml"==n||n&&"+xml"==n.substring(n.length-4)){try{if(window.DOMParser){var r=new DOMParser;e=r.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)}catch(o){e=null}(e&&e.parseError&&0!=e.parseError.errorCode||e&&e.documentElement&&"parsererror"==e.documentElement.nodeName||e&&e.documentElement&&"html"==e.documentElement.nodeName&&e.documentElement.firstChild&&"body"==e.documentElement.firstChild.nodeName&&e.documentElement.firstChild.firstChild&&"parsererror"==e.documentElement.firstChild.firstChild.nodeName)&&(e=null)}else e=null;return e},receive:function(t,e,n){if(this.readyState!==this.OPENED||!this.sent)throw"INVALID_STATE_ERR";this.status=t,this.statusText=t+" "+this.statusReasons[t],this.readyState=this.HEADERS_RECEIVED,this.onprogress(),this.onreadystatechange(),this.responseText=e,this.responseXML=this.makeXMLResponse(e),this.readyState=this.LOADING,this.onprogress(),this.onreadystatechange();var r=this,o=function(){r.readyState=r.DONE,r.onreadystatechange(),r.onprogress(),r.onload()};if(null===n)o();else{if("number"!=typeof n&&("object"!=typeof n||"number"!=typeof n.min||"number"!=typeof n.max))throw new Error("Invalid type of timeout.");"object"==typeof n&&(n=Math.floor(Math.random()*(n.max-n.min+1))+n.min),setTimeout(function(){o()},n)}},err:function(t){if(this.readyState!==this.OPENED||!this.sent)throw"INVALID_STATE_ERR";this.responseText=null,this.error=!0;for(var e in this.requestHeaders)delete this.requestHeaders[e];if(this.readyState=this.DONE,!this.async)throw t;this.onreadystatechange(),this.onerror()},authenticate:function(t,e){if(this.user)return t===this.user&&e===this.password;if(this.urlParts.user)return t===this.urlParts.user&&e===this.urlParts.password;var n=this.getRequestHeader("Authorization");if(void 0===n)return!1;if("Basic "!==n.substr(0,6))return!1;if("function"!=typeof atob)return!1;n=atob(n.substr(6));var r=n.split(":"),o=r.shift(),i=r.join(":");return t===o&&e===i},parseUri:function(t){for(var e=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r=/(?:^|&)([^&=]*)=?([^&]*)/g,o=e.exec(t),i={},s=14;s--;)i[n[s]]=o[s]||"";return i.queryKey={},i[n[12]].replace(r,function(t,e,n){e&&(i.queryKey[e]=n)}),i}},r.prototype={start:function(){function t(){this.onsend=function(){e.handle(this)},n.apply(this,arguments)}var e=this;t.prototype=n.prototype,window.OriginalHttpRequest=window.XMLHttpRequest,window.XMLHttpRequest=t},stop:function(){window.XMLHttpRequest=window.OriginalHttpRequest},handle:function(){}},e.exports=n},{}],2:[function(t,e){e.exports=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},{}],3:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,u,a,p;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,u=new Array(o-1),a=1;o>a;a++)u[a-1]=arguments[a];n.apply(this,u)}else if(i(n)){for(o=arguments.length,u=new Array(o-1),a=1;o>a;a++)u[a-1]=arguments[a];for(p=n.slice(),o=p.length,a=0;o>a;a++)p[a].apply(this,u)}return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned){var o;o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(u=s;u-->0;)if(n[u]===e||n[u].listener&&n[u].listener===e){o=u;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},{}],4:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(t,e){(function(t){function n(){for(;o.next;){o=o.next;var t=o.task;o.task=void 0;var e=o.domain;e&&(o.domain=void 0,e.enter());try{t()}catch(r){if(a)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),r;setTimeout(function(){throw r},0)}e&&e.exit()}s=!1}function r(e){i=i.next={task:e,domain:a&&t.domain,next:null},s||(s=!0,u())}var o={task:void 0,next:null},i=o,s=!1,u=void 0,a=!1;if("undefined"!=typeof t&&t.nextTick)a=!0,u=function(){t.nextTick(n)};else if("function"==typeof setImmediate)u="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=n,u=function(){p.port2.postMessage(0)}}else u=function(){setTimeout(n,0)};e.exports=r}).call(this,t("1YiZ5S"))},{"1YiZ5S":4}],6:[function(t,e){"use strict";function n(){throw new Error("Can't construct. GenericCollection is a mixin.")}e.exports=n,n.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.forEach(this.add,this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach(function(e){this.add(t[e],e)},this);return this},n.prototype.deleteEach=function(t,e){return t.forEach(function(t){this["delete"](t,e)},this),this},n.prototype.forEach=function(t){var e=arguments[1];return this.reduce(function(n,r,o,i,s){t.call(e,r,o,i,s)},void 0)},n.prototype.map=function(t){var e=arguments[1],n=[];return this.reduce(function(r,o,i,s,u){n.push(t.call(e,o,i,s,u))},void 0),n},n.prototype.enumerate=function(t){null==t&&(t=0);var e=[];return this.reduce(function(n,r){e.push([t++,r])},void 0),e},n.prototype.group=function(t,e,n){n=n||Object.equals;var r=[],o=[];return this.forEach(function(i,s,u){var a,s=t.call(e,i,s,u),p=o.indexOf(s,n);-1===p?(a=[],r.push([s,a]),o.push(s)):a=r[p][1],a.push(i)}),r},n.prototype.toArray=function(){return this.map(Function.identity)},n.prototype.toObject=function(){var t={};return this.reduce(function(e,n,r){t[r]=n},void 0),t},n.prototype.filter=function(t){var e=arguments[1],n=this.constructClone();return this.reduce(function(r,o,i,s,u){t.call(e,o,i,s,u)&&n.add(o,i)},void 0),n},n.prototype.every=function(t){for(var e=arguments[1],n=this.iterate();;){var r=n.next();if(r.done)return!0;if(!t.call(e,r.value,r.index,this))return!1}},n.prototype.some=function(t){for(var e=arguments[1],n=this.iterate();;){var r=n.next();if(r.done)return!1;if(t.call(e,r.value,r.index,this))return!0}},n.prototype.min=function(t){t=t||this.contentCompare||Object.compare;var e=!0;return this.reduce(function(n,r){return e?(e=!1,r):t(r,n)<0?r:n},void 0)},n.prototype.max=function(t){t=t||this.contentCompare||Object.compare;var e=!0;return this.reduce(function(n,r){return e?(e=!1,r):t(r,n)>0?r:n},void 0)},n.prototype.sum=function(t){return t=void 0===t?0:t,this.reduce(function(t,e){return t+e},t)},n.prototype.average=function(t){var e=void 0===t?0:t,n=void 0===t?0:t;return this.reduce(function(t,r){e+=r,n+=1},void 0),e/n},n.prototype.concat=function(){for(var t=this.constructClone(this),e=0;e<arguments.length;e++)t.addEach(arguments[e]);return t},n.prototype.flatten=function(){var t=this;return this.reduce(function(e,n){return n.forEach(function(t){this.push(t)},e,t),e},[])},n.prototype.zip=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),Array.unzip(t)},n.prototype.join=function(t){return this.reduce(function(e,n){return e+t+n})},n.prototype.sorted=function(t,e,n){return t=t||this.contentCompare||Object.compare,t.by?(e=t.by,t=t.compare||this.contentCompare||Object.compare):e=e||Function.identity,void 0===n&&(n=1),this.map(function(t){return{by:e(t),value:t}}).sort(function(e,r){return t(e.by,r.by)*n}).map(function(t){return t.value})},n.prototype.reversed=function(){return this.constructClone(this).reverse()},n.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var n=this.constructClone();return this.forEach(function(r,o){n.add(Object.clone(r,t-1,e),o)},this),n},n.prototype.only=function(){return 1===this.length?this.one():void 0},t("./shim-array")},{"./shim-array":10}],7:[function(t,e){function n(){throw new Error("Can't construct. GenericOrder is a mixin.")}var r=t("./shim-object");e.exports=n,n.prototype.equals=function(t,e){if(e=e||this.contentEquals||r.equals,this===t)return!0;if(!t)return!1;return this.length===t.length&&this.zip(t).every(function(t){return e(t[0],t[1])})},n.prototype.compare=function(t,e){if(e=e||this.contentCompare||r.compare,this===t)return 0;if(!t)return 1;var n=Math.min(this.length,t.length),o=this.zip(t).reduce(function(t,r,o){return 0===t?o>=n?t:e(r[0],r[1]):t},0);return 0===o?this.length-t.length:o}},{"./shim-object":12}],8:[function(t,e){"use strict";function n(t,e,r,o){if(!t)return n.empty;if(t instanceof n)return t;if(!(this instanceof n))return new n(t,e,r,o);if(Array.isArray(t)||"string"==typeof t)return w.set(this,new a(t,e,r,o)),void 0;if(t=Object(t),t.next)w.set(this,t);else if(t.iterate)w.set(this,t.iterate(e,r,o));else{if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}function r(t,e,n){this.iterator=t,this.callback=e,this.thisp=n}function o(t,e,n){this.iterator=t,this.callback=e,this.thisp=n}function i(t,e){this.iteration=t,this.iterator=e,this.parent=null}function s(t,e,n){this.iterator=t,this.callback=e,this.thisp=n}function u(t,e){this.iterator=t,this.index=e||0}function a(t,e,n,r){null==r&&(r=1),null==n&&(n=e,e=0),null==e&&(e=0),null==r&&(r=1),null==n&&(n=t.length),this.iterable=t,this.start=e,this.stop=n,this.step=r}function p(t,e){this.cycle=t,this.times=e,this.iterator=n.empty}function c(t){this.iterators=t,this.iterator=n.empty}function h(t){this.iterators=t,this.index=0}function l(t,e,n){this.start=t,this.stop=e,this.step=n,this.index=0}function f(t,e){this.value=t,this.times=e,this.index=0}function y(){}function d(t,e){this.value=t,this.index=e}function v(t){d.call(this,t),this.done=!0}e.exports=n;var m=t("./weak-map"),g=t("./generic-collection"),w=new m;n.prototype.forEach=g.prototype.forEach,n.prototype.map=g.prototype.map,n.prototype.filter=g.prototype.filter,n.prototype.every=g.prototype.every,n.prototype.some=g.prototype.some,n.prototype.min=g.prototype.min,n.prototype.max=g.prototype.max,n.prototype.sum=g.prototype.sum,n.prototype.average=g.prototype.average,n.prototype.flatten=g.prototype.flatten,n.prototype.zip=g.prototype.zip,n.prototype.enumerate=g.prototype.enumerate,n.prototype.sorted=g.prototype.sorted,n.prototype.group=g.prototype.group,n.prototype.reversed=g.prototype.reversed,n.prototype.toArray=g.prototype.toArray,n.prototype.toObject=g.prototype.toObject,n.prototype.constructClone=function(t){var e=[];return e.addEach(t),e},n.prototype.next=function(){var t=w.get(this);return t?t.next():n.done},n.prototype.iterateMap=function(t){var e=n(this),o=arguments[1];return new r(e,t,o)},r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.next=function(){var t=this.iterator.next();return t.done?t:new d(this.callback.call(this.thisp,t.value,t.index,this.iteration),t.index)},n.prototype.iterateFilter=function(t){var e=n(this),r=arguments[1];return new o(e,t,r)},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.next=function(){for(var t;;)if(t=this.iterator.next(),t.done||this.callback.call(this.thisp,t.value,t.index,this.iteration))return t},n.prototype.reduce=function(t){var e,r=n(this),o=arguments[1],i=arguments[2];if(e=r.next(),e.done){if(arguments.length>1)return arguments[1];throw TypeError("Reduce of empty iterator with no initial value")}for(o=arguments.length>1?t.call(i,o,e.value,e.index,r):e.value;;){if(e=r.next(),e.done)return o;o=t.call(i,o,e.value,e.index,r)}},n.prototype.dropWhile=function(t){for(var e,r=n(this),o=arguments[1];;){if(e=r.next(),e.done)return n.empty;if(!t.call(o,e.value,e.index,r))return new i(e,r)}},i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.next=function(){var t=this.iteration;return t?(this.iteration=null,t):this.iterator.next()},n.prototype.takeWhile=function(t){var e=n(this),r=arguments[1];return new s(e,t,r)},s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.next=function(){var t=this.iterator.next();return t.done?t:this.callback.call(this.thisp,t.value,t.index,this.iterator)?t:n.done},n.prototype.iterateZip=function(){return n.unzip(Array.prototype.concat.apply(this,arguments))},n.prototype.iterateUnzip=function(){return n.unzip(this)},n.prototype.iterateEnumerate=function(t){return n.count(t).iterateZip(this)},n.prototype.iterateConcat=function(){return n.flatten(Array.prototype.concat.apply(this,arguments))},n.prototype.iterateFlatten=function(){return n.flatten(this)},n.prototype.recount=function(t){return new u(this,t)},u.prototype=Object.create(n.prototype),u.prototype.constructor=u,u.prototype.next=function(){var t=this.iterator.next();return t.done?t:new d(t.value,this.index++)},a.prototype.next=function(){if("object"==typeof this.iterable)for(;!(this.start in this.iterable);){if(this.start>=this.stop)return n.done;this.start+=this.step}if(this.start>=this.stop)return n.done;var t=new d(this.iterable[this.start],this.start);return this.start+=this.step,t},n.cycle=function(t,e){return arguments.length<2&&(e=1/0),new p(t,e)},p.prototype=Object.create(n.prototype),p.prototype.constructor=p,p.prototype.next=function(){var t=this.iterator.next();return t.done?this.times>0?(this.times--,this.iterator=new n(this.cycle),this.iterator.next()):t:t},n.concat=function(){return n.flatten(Array.prototype.slice.call(arguments))},n.flatten=function(t){return t=n(t),new c(t)},c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.next=function(){var t=this.iterator.next();if(t.done){var e=this.iterators.next();return e.done?n.done:(this.iterator=new n(e.value),this.iterator.next())}return t},n.unzip=function(t){return t=n(t).map(n),0===t.length?new n.empty:new h(t)},h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.prototype.next=function(){var t=!1,e=this.iterators.map(function(e){var n=e.next();return n.done?(t=!0,void 0):n.value});return t?n.done:new d(e,this.index++)},n.zip=function(){return n.unzip(Array.prototype.slice.call(arguments))},n.range=function(t,e,n){return arguments.length<3&&(n=1),arguments.length<2&&(e=t,t=0),t=t||0,n=n||1,new l(t,e,n)},n.count=function(t,e){return n.range(t,1/0,e)},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.next=function(){if(this.start>=this.stop)return n.done;var t=this.start;return this.start+=this.step,new d(t,this.index++)},n.repeat=function(t,e){return null==e&&(e=1/0),new f(t,e)},f.prototype=Object.create(n.prototype),f.prototype.constructor=f,f.prototype.next=function(){return this.index<this.times?new d(this.value,this.index++):n.done},n.enumerate=function(t,e){return n.count(e).iterateZip(new n(t))},y.prototype=Object.create(n.prototype),y.prototype.constructor=y,y.prototype.next=function(){return n.done},n.empty=new y,d.prototype.done=!1,d.prototype.equals=function(t,e,n){return t?e(this.value,t.value,e,n)&&this.index===t.index&&this.done===t.done:!1},v.prototype=Object.create(d.prototype),v.prototype.constructor=v,v.prototype.done=!0,n.Iteration=d,n.DoneIteration=v,n.done=new v},{"./generic-collection":6,"./weak-map":15}],9:[function(t,e){!function(){"use strict";function t(e){e.permitHostObjects___&&e.permitHostObjects___(t)}function n(t){return!(t.substr(0,f.length)==f&&"___"===t.substr(t.length-3))}function r(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[y];if(e&&e.key===t)return e;if(!l(t))return void 0;e={key:t};try{return h(t,y,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(n){return void 0}}function o(t){return t.prototype=null,Object.freeze(t)}function i(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=t);var s=!1;if("function"==typeof WeakMap){var u=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var a=new u,p=Object.freeze({});if(a.set(p,1),1===a.get(p))return e.exports=WeakMap,void 0;s=!0}}var c=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),h=Object.defineProperty,l=Object.isExtensible,f="weakmap:",y=f+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var d=new ArrayBuffer(25),v=new Uint8Array(d);crypto.getRandomValues(v),y=f+"rand:"+Array.prototype.map.call(v,function(t){return(t%36).toString(36)}).join("")+"___"}if(h(Object,"getOwnPropertyNames",{value:function(t){return c(t).filter(n)}}),"getPropertyNames"in Object){var m=Object.getPropertyNames;h(Object,"getPropertyNames",{value:function(t){return m(t).filter(n)}})}!function(){var t=Object.freeze;h(Object,"freeze",{value:function(e){return r(e),t(e)}});var e=Object.seal;h(Object,"seal",{value:function(t){return r(t),e(t)}});var n=Object.preventExtensions;h(Object,"preventExtensions",{value:function(t){return r(t),n(t)}})}();var g=!1,w=0,b=function(){function t(t,e){var n,o=r(t);return o?p in o?o[p]:e:(n=u.indexOf(t),n>=0?a[n]:e)}function e(t){var e=r(t);return e?p in e:u.indexOf(t)>=0}function n(t,e){var n,o=r(t);return o?o[p]=e:(n=u.indexOf(t),n>=0?a[n]=e:(n=u.length,a[n]=e,u[n]=t)),this}function s(t){var e,n,o=r(t);return o?p in o&&delete o[p]:(e=u.indexOf(t),0>e?!1:(n=u.length-1,u[e]=void 0,a[e]=a[n],u[e]=u[n],u.length=n,a.length=n,!0))}this instanceof b||i();var u=[],a=[],p=w++;return Object.create(b.prototype,{get___:{value:o(t)},has___:{value:o(e)},set___:{value:o(n)},delete___:{value:o(s)}})};b.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},"delete":{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof u?!function(){function n(){function e(t,e){return c?p.has(t)?p.get(t):c.get___(t,e):p.get(t,e)}function n(t){return p.has(t)||(c?c.has___(t):!1)}function r(t){var e=!!p["delete"](t);return c?c.delete___(t)||e:e}this instanceof b||i();var a,p=new u,c=void 0,h=!1;return a=s?function(t,e){return p.set(t,e),p.has(t)||(c||(c=new b),c.set(t,e)),this}:function(t,e){if(h)try{p.set(t,e)}catch(n){c||(c=new b),c.set___(t,e)}else p.set(t,e);return this},Object.create(b.prototype,{get___:{value:o(e)},has___:{value:o(n)},set___:{value:o(a)},delete___:{value:o(r)},permitHostObjects___:{value:o(function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");h=!0})}})}s&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=b.prototype,e.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=b)}}()},{}],10:[function(t,e){"use strict";function n(t,e){Object.defineProperty(Array.prototype,t,{value:e,writable:!0,configurable:!0,enumerable:!1})}var r=(t("./shim-function"),t("./generic-collection")),o=t("./generic-order"),i=t("./iterator"),s=t("weak-map");e.exports=Array;var u=(Array.prototype.splice,Array.prototype.slice);Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(t){var e=[];return e.addEach(t),e},Array.unzip=function(t){for(var e=[],n=1/0,r=0;r<t.length;r++){var o=t[r];t[r]=o.toArray(),o.length<n&&(n=o.length)}for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<o.length;i++)n>i&&i in o&&(e[i]=e[i]||[],e[i][r]=o[i]);return e},n("addEach",r.prototype.addEach),n("deleteEach",r.prototype.deleteEach),n("toArray",r.prototype.toArray),n("toObject",r.prototype.toObject),n("min",r.prototype.min),n("max",r.prototype.max),n("sum",r.prototype.sum),n("average",r.prototype.average),n("only",r.prototype.only),n("flatten",r.prototype.flatten),n("zip",r.prototype.zip),n("enumerate",r.prototype.enumerate),n("group",r.prototype.group),n("sorted",r.prototype.sorted),n("reversed",r.prototype.reversed),n("constructClone",function(t){var e=new this.constructor;return e.addEach(t),e}),n("has",function(t,e){return-1!==this.findValue(t,e)}),n("get",function(t,e){if(+t!==t)throw new Error("Indicies must be numbers");return!t in this?e:this[t]}),n("set",function(t,e){return t<this.length?this.splice(t,1,e):this.swap(t,1,[e]),this}),n("add",function(t){return this.push(t),!0}),n("delete",function(t,e){var n=this.findValue(t,e);return-1!==n?(this.splice(n,1),!0):!1}),n("findValue",function(t,e){e=e||this.contentEquals||Object.equals;for(var n=0;n<this.length;n++)if(n in this&&e(this[n],t))return n;return-1}),n("findLastValue",function(t,e){e=e||this.contentEquals||Object.equals;var n=this.length;do if(n--,n in this&&e(this[n],t))return n;while(n>0);return-1}),n("swap",function(t,e,n){n?Array.isArray(n)||(n=u.call(n)):n=Array.empty,0>t?t=this.length+t:t>this.length&&(this.length=t),t+e>this.length?e=this.length-t:0>e&&(e=0);var r=n.length-e,o=this.length,i=this.length+r;if(r>0)for(var s=o-1;s>=t+e;s--){var a=s+r;s in this?this[a]=this[s]:(this[a]=void 0,delete this[a])}for(var s=0;s<n.length;s++)s in n?this[t+s]=n[s]:(this[t+s]=void 0,delete this[t+s]);if(0>r)for(var s=t+n.length;o-r>s;s++){var a=s-r;a in this?this[s]=this[a]:(this[s]=void 0,delete this[s])}this.length=i}),n("peek",function(){return this[0]}),n("poke",function(t){this.length>0&&(this[0]=t)}),n("peekBack",function(){return this.length>0?this[this.length-1]:void 0}),n("pokeBack",function(t){this.length>0&&(this[this.length-1]=t)}),n("one",function(){for(var t in this)if(Object.owns(this,t))return this[t]}),n("clear",function(){return this.length=0,this}),n("compare",function(t,e){e=e||Object.compare;var n,r,i,s,u;if(this===t)return 0;if(!t||!Array.isArray(t))return o.prototype.compare.call(this,t,e);for(r=Math.min(this.length,t.length),n=0;r>n;n++)if(n in this){if(!(n in t))return-1;if(i=this[n],s=t[n],u=e(i,s))return u}else if(n in t)return 1;return this.length-t.length}),n("equals",function(t,e,n){e=e||Object.equals;var r,i,s=0,u=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return o.prototype.equals.call(this,t);if(u!==t.length)return!1;for(;u>s;++s)if(s in this){if(!(s in t))return!1;if(r=this[s],i=t[s],!e(r,i,e,n))return!1}else if(s in t)return!1;return!0}),n("clone",function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;e=e||new s;var n=[];for(var r in this)Object.owns(this,r)&&(n[r]=Object.clone(this[r],t-1,e));return n}),n("iterate",function(t,e,n){return new i(this,t,e,n)})},{"./generic-collection":6,"./generic-order":7,"./iterator":8,"./shim-function":11,"weak-map":9}],11:[function(t,e){e.exports=Function,Function.noop=function(){},Function.identity=function(t){return t},Function.by=function(t,e){e=e||Object.compare,t=t||Function.identity;var n=function(n,r){return e(t(n),t(r))};return n.compare=e,n.by=t,n},Function.get=function(t){return function(e){return Object.get(e,t)}}},{}],12:[function(t,e){"use strict";var n=t("weak-map");e.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(t){return Object(t)===t},Object.getValueOf=function(t){return t&&"function"==typeof t.valueOf&&(t=t.valueOf()),t};var r=new n;Object.hash=function(t){return t&&"function"==typeof t.hash?""+t.hash():Object.isObject(t)?(r.has(t)||r.set(t,Math.random().toString(36).slice(2)),r.get(t)):""+t};var o=Object.prototype.hasOwnProperty;Object.owns=function(t,e){return o.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw new Error("Object.has can't accept non-object: "+typeof t);if(t&&"function"==typeof t.has)return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,n){if("object"!=typeof t)throw new Error("Object.get can't accept non-object: "+typeof t);return t&&"function"==typeof t.get?t.get(e,n):Object.has(t,e)?t[e]:n},Object.set=function(t,e,n){t&&"function"==typeof t.set?t.set(e,n):t[e]=n},Object.addEach=function(t,e){return e&&("function"!=typeof e.forEach||e.hasOwnProperty("forEach")?Object.keys(e).forEach(function(n){t[n]=e[n]}):"function"==typeof e.keys?e.forEach(function(e,n){t[n]=e}):e.forEach(function(e){t[e[0]]=e[1]})),t},Object.forEach=function(t,e,n){Object.keys(t).forEach(function(r){e.call(n,t[r],r,t)})},Object.map=function(t,e,n){return Object.keys(t).map(function(r){return e.call(n,t[r],r,t)})},Object.values=function(t){return Object.map(t,Function.identity)},Object.concat=function(){for(var t={},e=0;e<arguments.length;e++)Object.addEach(t,arguments[e]);
return t},Object.from=Object.concat,Object.is=function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e},Object.equals=function(t,e,r,o){if(r=r||Object.equals,t=Object.getValueOf(t),e=Object.getValueOf(e),t===e)return!0;if(Object.isObject(t)){if(o=o||new n,o.has(t))return!0;o.set(t,!0)}if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,r,o);if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,r,o);if(Object.isObject(t)&&Object.isObject(e)&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){for(var i in t)if(!r(t[i],e[i],r,o))return!1;for(var i in e)if(!(i in t&&r(e[i],t[i],r,o)))return!1;return!0}return t!==t&&e!==e?!0:t&&e?!1:t===e},Object.compare=function(t,e){if(t=Object.getValueOf(t),e=Object.getValueOf(e),t===e)return 0;var n=typeof t,r=typeof e;return"number"===n&&"number"===r?t-e:"string"===n&&"string"===r?e>t?-1/0:1/0:t&&"function"==typeof t.compare?t.compare(e):e&&"function"==typeof e.compare?-e.compare(t):0},Object.clone=function(t,e,r){if(t=Object.getValueOf(t),r=r||new n,void 0===e)e=1/0;else if(0===e)return t;if("function"==typeof t)return t;if(Object.isObject(t)){if(!r.has(t))if(t&&"function"==typeof t.clone)r.set(t,t.clone(e,r));else{var o=Object.getPrototypeOf(t);if(null!==o&&o!==Object.prototype)throw new Error("Can't clone "+t);var i=Object.create(o);r.set(t,i);for(var s in t)i[s]=Object.clone(t[s],e-1,r)}return r.get(t)}return t},Object.clear=function(t){if(t&&"function"==typeof t.clear)t.clear();else for(var e=Object.keys(t),n=e.length;n;)n--,delete t[e[n]];return t}},{"weak-map":9}],13:[function(){if(!RegExp.escape){var t=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(e){return e.replace(t,"\\$&")}}},{}],14:[function(t){t("./shim-array"),t("./shim-object"),t("./shim-function"),t("./shim-regexp")},{"./shim-array":10,"./shim-function":11,"./shim-object":12,"./shim-regexp":13}],15:[function(t,e){e.exports=t("weak-map")},{"weak-map":9}],16:[function(t,e){(function(n){"use strict";function r(t){return t===Object(t)}function o(t,e){if(N&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(F)){for(var n=[],r=e;r&&U.get(r);r=U.get(r).became)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+F+"\n");t.stack=i(o)}}function i(t){if(f.isIntrospective)return t;for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];a(o)||s(o)||!o||n.push(o)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===L&&r>=M&&Y>=r}function p(){if(N)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return L=r[0],r[1]}}function c(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&(n?console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack):console.warn(e+" is deprecated.",new Error("").stack)),t.apply(this,arguments)}}function h(t){var e=U.get(t);return e&&e.became?(e=l(e),U.set(t,e),e):e}function l(t){return t.became?(t.became=l(t.became),t.became):t}function f(t){return O(t)?t:k(t)?(z.has(t)||z.set(t,new _(new S(t))),z.get(t)):new _(new P(t))}function y(t){return new _(new q(t))}function d(){var t=new R,e=new _(t),n=new A(e);if(f.longStackSupport&&N)try{throw new Error}catch(r){e.stack=r.stack.substring(r.stack.indexOf("\n")+1)}return n}function v(t){function e(){u=-1/0;for(var t=0;t<s.length;t++)s[t]>u&&(u=s[t])}if(O(t))return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("Q.all no longer directly unwraps a promise. Use Q(array).all()"),f(t).all();var n,r=0,o=d(),i=Array(t.length),s=[],u=-1/0;return Array.prototype.forEach.call(t,function(a,p){var c;O(a)&&"fulfilled"===(c=h(a)).state?i[p]=c.value:(++r,a=f(a),a.then(function(t){i[p]=t,0===--r&&o.resolve(i)},o.reject),a.observeEstimate(function(r){var i=s[p];s[p]=r,r>u?u=r:i===u&&u>=r&&e(),s.length===t.length&&u!==n&&(o.setEstimate(u),n=u)}))}),0===r&&o.resolve(i),o.promise}function m(t){return O(t)?("undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("Q.allSettled no longer directly unwraps a promise. Use Q(array).allSettled()"),f(t).allSettled()):v(t.map(function(t){function e(){return t.inspect()}return t=f(t),t.then(e,e)}))}function g(t,e,n){return f(t).spread(e,n)}function w(t){return new _(function(e){t.forEach(function(t){f(t).then(e.resolve,e.reject)})})}function b(t){return function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;n++)e[n]=arguments[n];return f(t).apply(this,e)}}function x(t){return function(){function e(t,e){var i;try{i=n[t](e)}catch(s){return y(s)}return i.done?f(i.value):f(i.value).then(r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function E(t){x(t)().done()}function _(t){if(!(this instanceof _))return new _(t);if("function"==typeof t){var e=t,n=d();t=h(n.promise);try{e(n.resolve,n.reject,n.setEstimate)}catch(r){n.reject(r)}}U.set(this,t)}function j(t){return f(t)}function O(t){return r(t)&&!!U.get(t)}function k(t){return r(t)&&"function"==typeof t.then}function T(t){throw t}function A(t){this.promise=t,W.set(this,t);var e=this,n=this.resolve;this.resolve=function(t){n.call(e,t)};var r=this.reject;this.reject=function(t){r.call(e,t)}}function P(t){this.value=t,this.estimate=Date.now()}function q(t){this.reason=t,this.estimate=1/0}function R(){this.messages=[],this.observers=[],this.estimate=1/0}function S(t){this.thenable=t,this.became=null,this.estimate=1/0}function H(t){this.promise=t}var N=!1;try{throw new Error}catch(C){N=!!C.stack}var L,M=p();t("collections/shim");var X=t("collections/weak-map"),I=t("collections/iterator"),D=t("asap"),F="From previous event:",U=new X,Q=new Error("Can't resolve a promise with itself"),B=y(Q),V=h(B),z=new X;e.exports=f,f.longStackSupport=!1,f.reject=y,f.defer=d,f.when=function(t,e,n,r){return f(t).then(e,n,r)},f.all=v,f.allSettled=m,f.delay=function(t,e){return void 0===e&&(e=t,t=void 0),f(t).delay(e)},f.timeout=function(t,e,n){return f(t).timeout(e,n)},f.spread=g,f.join=function(t,e){return f.spread([t,e],function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},f.race=w,f.try=function(t){return f(t).dispatch("call",[[]])},f.function=b,f.promised=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;n++)e[n]=arguments[n];return g([this,v(e)],function(e,n){return t.apply(e,n)})}},f.passByCopy=f.push=function(t){return Object(t)!==t||O(t)||G.set(t,!0),t},f.isPortable=function(t){return Object(t)===t&&G.has(t)};var G=new X;f.async=x,f.spawn=E,f.Promise=_,_.all=v,_.race=w,_.resolve=j,_.reject=y,f.isPromise=O,_.prototype.inspect=function(){return h(this).inspect()},_.prototype.isPending=function(){return"pending"===h(this).state},_.prototype.isFulfilled=function(){return"fulfilled"===h(this).state},_.prototype.isRejected=function(){return"rejected"===h(this).state},_.prototype.toBePassed=function(){return"passed"===h(this).state},_.prototype.toString=function(){return"[object Promise]"},_.prototype.then=function(t,e,n){var r,o=this,i=d();r="function"==typeof t?function(e){try{i.resolve(t.call(void 0,e))}catch(n){i.reject(n)}}:i.resolve;var s;if(s="function"==typeof e?function(t){try{i.resolve(e.call(void 0,t))}catch(n){i.reject(n)}}:i.reject,this.done(r,s),void 0!==n){var u=function(){i.setEstimate(o.getEstimate()+n)};this.observeEstimate(u),u()}return i.promise},_.prototype.done=function(t,e){var r=this,i=!1;D(function(){var s;"function"==typeof t&&(s=f.onerror?function(e){if(!i){i=!0;try{t.call(void 0,e)}catch(n){(f.onerror||T)(n)}}}:function(e){i||(i=!0,t.call(void 0,e))});var u;u="function"==typeof e&&f.onerror?function(t){if(!i){i=!0,o(t,r);try{e.call(void 0,t)}catch(n){(f.onerror||T)(n)}}}:"function"==typeof e?function(t){i||(i=!0,o(t,r),e.call(void 0,t))}:f.onerror||T,"object"==typeof n&&n.domain&&(u=n.domain.bind(u)),h(r).dispatch(s,"then",[u])})},_.prototype.thenResolve=function(t){return t=f(t),v([this,t]).then(function(){return t},null,0)},_.prototype.thenReject=function(t){return this.then(function(){throw t},null,0)},_.prototype.all=function(){return this.then(v)},_.prototype.allSettled=function(){return this.then(m)},_.prototype.catch=function(t){return this.then(void 0,t)},_.prototype.finally=function(t,e){return t?(t=f(t),this.then(function(e){return t.call().then(function(){return e})},function(e){return t.call().then(function(){throw e})},e)):this},_.prototype.observeEstimate=function(t){return this.rawDispatch(null,"estimate",[t]),this},_.prototype.getEstimate=function(){return h(this).estimate},_.prototype.dispatch=function(t,e){var n=d();return this.rawDispatch(n.resolve,t,e),n.promise},_.prototype.rawDispatch=function(t,e,n){var r=this;D(function(){h(r).dispatch(t,e,n)})},_.prototype.get=function(t){return this.dispatch("get",[t])},_.prototype.invoke=function(t){for(var e=new Array(arguments.length-1),n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.dispatch("invoke",[t,e])},_.prototype.apply=function(t,e){return this.dispatch("call",[e,t])},_.prototype.call=function(t){for(var e=new Array(Math.max(0,arguments.length-1)),n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.dispatch("call",[e,t])},_.prototype.bind=function(t){for(var e=this,n=new Array(Math.max(0,arguments.length-1)),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=n.slice(),o=0;o<arguments.length;o++)r[r.length]=arguments[o];return e.dispatch("call",[r,t])}},_.prototype.keys=function(){return this.dispatch("keys",[])},_.prototype.iterate=function(){return this.dispatch("iterate",[])},_.prototype.spread=function(t,e,n){return this.all().then(function(e){return t.apply(void 0,e)},e,n)},_.prototype.timeout=function(t,e){var n=d(),r=setTimeout(function(){n.reject(new Error(e||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)}),n.promise},_.prototype.delay=function(t){return this.then(function(e){var n=d();return n.setEstimate(Date.now()+t),setTimeout(function(){n.resolve(e)},t),n.promise},null,t)},_.prototype.pull=function(){return this.dispatch("pull",[])},_.prototype.pass=function(){return this.toBePassed()?this:new _(new H(this))};var W=new X;A.prototype.resolve=function(t){var e=h(W.get(this));e.messages&&e.become(f(t))},A.prototype.reject=function(t){var e=h(W.get(this));e.messages&&e.become(y(t))},A.prototype.setEstimate=function(t){if(t=+t,t!==t&&(t=1/0),1e12>t&&t!==-1/0)throw new Error("Estimate values should be a number of miliseconds in the future");var e=h(W.get(this));e.setEstimate&&e.setEstimate(t)},P.prototype.state="fulfilled",P.prototype.inspect=function(){return{state:"fulfilled",value:this.value}},P.prototype.dispatch=function(t,e,n){var r;if("then"===e||"get"===e||"call"===e||"invoke"===e||"keys"===e||"iterate"===e||"pull"===e)try{r=this[e].apply(this,n)}catch(o){r=y(o)}else if("estimate"===e)n[0].call(void 0,this.estimate);else{var i=new Error("Fulfilled promises do not support the "+e+" operator");r=y(i)}t&&t(r)},P.prototype.then=function(){return this.value},P.prototype.get=function(t){return this.value[t]},P.prototype.call=function(t,e){return this.callInvoke(this.value,t,e)},P.prototype.invoke=function(t,e){return this.callInvoke(this.value[t],e,this.value)},P.prototype.callInvoke=function(t,e,n){for(var r,o=0;o<e.length;o++)O(e[o])&&e[o].toBePassed()&&(r=r||[],r.push(e[o]));if(r){var i=this;return v(r).then(function(){return i.callInvoke(t,e.map(function(t){return O(t)&&t.toBePassed()?t.inspect().value:t}),n)})}return t.apply(n,e)},P.prototype.keys=function(){return Object.keys(this.value)},P.prototype.iterate=function(){return new I(this.value)},P.prototype.pull=function(){var t;if(Object(this.value)===this.value){t=Array.isArray(this.value)?[]:{};for(var e in this.value)t[e]=this.value[e]}else t=this.value;return f.push(t)},q.prototype.state="rejected",q.prototype.inspect=function(){return{state:"rejected",reason:this.reason}},q.prototype.dispatch=function(t,e,n){var r;r="then"===e?this.then(t,n[0]):this,t&&t(r)},q.prototype.then=function(t,e){return e?e(this.reason):this},R.prototype.state="pending",R.prototype.inspect=function(){return{state:"pending"}},R.prototype.dispatch=function(t,e,n){if(this.messages.push([t,e,n]),"estimate"===e){this.observers.push(n[0]);var r=this;D(function(){n[0].call(void 0,r.estimate)})}},R.prototype.become=function(t){this.became=V;var e=h(t);this.became=e,U.set(t,e),this.promise=void 0,this.messages.forEach(function(e){D(function(){var n=h(t);n.dispatch.apply(n,e)})}),this.messages=void 0,this.observers=void 0},R.prototype.setEstimate=function(t){if(this.observers){var e=this;e.estimate=t,this.observers.forEach(function(e){D(function(){e.call(void 0,t)})})}},S.prototype.state="thenable",S.prototype.inspect=function(){return{state:"pending"}},S.prototype.cast=function(){if(!this.became){var t=d(),e=this.thenable;D(function(){try{e.then(t.resolve,t.reject)}catch(n){t.reject(n)}}),this.became=h(t.promise)}return this.became},S.prototype.dispatch=function(t,e,n){this.cast().dispatch(t,e,n)},H.prototype.state="passed",H.prototype.inspect=function(){return this.promise.inspect()},H.prototype.dispatch=function(t,e,n){return this.promise.rawDispatch(t,e,n)},f.ninvoke=function(t,e){for(var n=new Array(Math.max(0,arguments.length-1)),r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=f.defer();return n[r-2]=o.makeNodeResolver(),f(t).dispatch("invoke",[e,n]).catch(o.reject),o.promise},_.prototype.ninvoke=function(t){for(var e=new Array(arguments.length),n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=f.defer();return e[n-1]=r.makeNodeResolver(),this.dispatch("invoke",[t,e]).catch(r.reject),r.promise},f.denodeify=function(t,e){return function(){for(var n=new Array(arguments.length+1),r=0;r<arguments.length;r++)n[r]=arguments[r];var o=f.defer();return n[r]=o.makeNodeResolver(e),f(t).apply(this,n).catch(o.reject),o.promise}},A.prototype.makeNodeResolver=function(t){var e=this.resolve;return t===!0?function(t){if(t)e(y(t));else{for(var n=new Array(Math.max(0,arguments.length-1)),r=1;r<arguments.length;r++)n[r-1]=arguments[r];e(n)}}:t?function(n){if(n)e(y(n));else{var r={};for(var o in t)r[t[o]]=arguments[o+1];e(r)}}:function(t,n){t?e(y(t)):e(n)}},_.prototype.nodeify=function(t){return t?(this.done(function(e){t(null,e)},t),void 0):this},f.nextTick=c(D,"nextTick","asap package"),f.resolve=c(f,"resolve","Q"),f.fulfill=c(f,"fulfill","Q"),f.isPromiseAlike=c(k,"isPromiseAlike","(not supported)"),f.fail=c(function(t,e){return f(t).catch(e)},"Q.fail","Q(value).catch"),f.fin=c(function(t,e){return f(t).finally(e)},"Q.fin","Q(value).finally"),f.progress=c(function(t){return t},"Q.progress","no longer supported"),f.thenResolve=c(function(t,e){return f(t).thenResolve(e)},"thenResolve","Q(value).thenResolve"),f.thenReject=c(function(t,e){return f(t).thenResolve(e)},"thenResolve","Q(value).thenResolve"),f.isPending=c(function(t){return f(t).isPending()},"isPending","Q(value).isPending"),f.isFulfilled=c(function(t){return f(t).isFulfilled()},"isFulfilled","Q(value).isFulfilled"),f.isRejected=c(function(t){return f(t).isRejected()},"isRejected","Q(value).isRejected"),f.master=c(function(t){return t},"master","no longer necessary"),f.makePromise=function(){throw new Error("makePromise is no longer supported")},f.dispatch=c(function(t,e,n){return f(t).dispatch(e,n)},"dispatch","Q(value).dispatch"),f.get=c(function(t,e){return f(t).get(e)},"get","Q(value).get"),f.keys=c(function(t){return f(t).keys()},"keys","Q(value).keys"),f.post=c(function(t,e,n){return f(t).post(e,n)},"post","Q(value).invoke (spread arguments)"),f.mapply=c(function(t,e,n){return f(t).post(e,n)},"post","Q(value).invoke (spread arguments)"),f.send=c(function(t,e){return f(t).post(e,Array.prototype.slice.call(arguments,2))},"send","Q(value).invoke"),f.set=function(){throw new Error("Q.set no longer supported")},f.delete=function(){throw new Error("Q.delete no longer supported")},f.nearer=c(function(t){return O(t)&&t.isFulfilled()?t.inspect().value:t},"nearer","inspect().value (+nuances)"),f.fapply=c(function(t,e){return f(t).dispatch("call",[e])},"fapply","Q(callback).apply(thisp, args)"),f.fcall=c(function(t){return f(t).dispatch("call",[Array.prototype.slice.call(arguments,1)])},"fcall","Q(callback).call(thisp, ...args)"),f.fbind=c(function(t){var e=f(t),n=Array.prototype.slice.call(arguments,1);return function(){return e.dispatch("call",[n.concat(Array.prototype.slice.call(arguments)),this])}},"fbind","bind with thisp"),f.promise=c(_,"promise","Promise"),_.prototype.fapply=c(function(t){return this.dispatch("call",[t])},"fapply","apply with thisp"),_.prototype.fcall=c(function(){return this.dispatch("call",[Array.prototype.slice.call(arguments)])},"fcall","try or call with thisp"),_.prototype.fail=c(function(t){return this.catch(t)},"fail","catch"),_.prototype.fin=c(function(t){return this.finally(t)},"fin","finally"),_.prototype.set=function(){throw new Error("Promise set no longer supported")},_.prototype.delete=function(){throw new Error("Promise delete no longer supported")},A.prototype.notify=c(function(){},"notify","no longer supported"),_.prototype.progress=c(function(){return this},"progress","no longer supported"),_.prototype.mapply=c(function(t,e){return this.dispatch("invoke",[t,e])},"mapply","invoke"),_.prototype.fbind=c(function(){return f.fbind.apply(f,[void 0].concat(Array.prototype.slice.call(arguments)))},"fbind","bind(thisp, ...args)"),_.prototype.send=c(function(){return this.dispatch("invoke",[name,Array.prototype.slice.call(arguments,1)])},"send","invoke"),_.prototype.mcall=c(function(){return this.dispatch("invoke",[name,Array.prototype.slice.call(arguments,1)])},"mcall","invoke"),_.prototype.passByCopy=c(function(t){return t},"passByCopy","Q.passByCopy"),f.nfapply=c(function(t,e){var n=f.defer(),r=Array.prototype.slice.call(e);return r.push(n.makeNodeResolver()),f(t).apply(this,r).catch(n.reject),n.promise},"nfapply"),_.prototype.nfapply=c(function(t){return f.nfapply(this,t)},"nfapply"),f.nfcall=c(function(t){var e=Array.prototype.slice.call(arguments,1);return f.nfapply(t,e)},"nfcall"),_.prototype.nfcall=c(function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];return f.nfapply(this,t)},"nfcall"),f.nfbind=c(function(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.concat(Array.prototype.slice.call(arguments)),r=f.defer();return n.push(r.makeNodeResolver()),f(t).apply(this,n).catch(r.reject),r.promise}},"nfbind","denodeify (with caveats)"),_.prototype.nfbind=c(function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];return f.nfbind(this,t)},"nfbind","denodeify (with caveats)"),f.nbind=c(function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(Array.prototype.slice.call(arguments)),i=f.defer();return o.push(i.makeNodeResolver()),f(r).apply(this,o).catch(i.reject),i.promise}},"nbind","denodeify (with caveats)"),f.npost=c(function(t,e,n){var r=f.defer();return n.push(r.makeNodeResolver()),f(t).dispatch("invoke",[e,n]).catch(r.reject),r.promise},"npost","ninvoke (with spread arguments)"),_.prototype.npost=c(function(t,e){return f.npost(this,t,e)},"npost","Q.ninvoke (with caveats)"),f.nmapply=c(f.nmapply,"nmapply","q/node nmapply"),_.prototype.nmapply=c(_.prototype.npost,"nmapply","Q.nmapply"),f.nsend=c(f.ninvoke,"nsend","q/node ninvoke"),f.nmcall=c(f.ninvoke,"nmcall","q/node ninvoke"),_.prototype.nsend=c(_.prototype.ninvoke,"nsend","q/node ninvoke"),_.prototype.nmcall=c(_.prototype.ninvoke,"nmcall","q/node ninvoke");var Y=p()}).call(this,t("1YiZ5S"))},{"1YiZ5S":4,asap:5,"collections/iterator":8,"collections/shim":14,"collections/weak-map":15}],17:[function(t){window.http=t("./Http")},{"./Http":26}],18:[function(t,e){var n,r,o={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("events").EventEmitter,n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.http=null,e.prototype.setHttp=function(t){return this.http=t,this.emit("httpReady",this.http)},e}(r),e.exports=n},{events:3}],19:[function(t,e){var n,r,o,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./BaseExtension"),n=null,o=function(t){function e(t){this.onFormSubmitted=i(this.onFormSubmitted,this),n=t,n(document).on("submit."+e.EVENTS_NAMESPACE,"form.ajax:not(.not-ajax)",this.onFormSubmitted),n(document).on("click."+e.EVENTS_NAMESPACE,'form.ajax:not(.not-ajax) input[type="submit"]',this.onFormSubmitted),n(document).on("click."+e.EVENTS_NAMESPACE,'form input[type="submit"].ajax',this.onFormSubmitted)}return u(e,t),e.EVENTS_NAMESPACE="http-ext-forms",e.prototype.onFormSubmitted=function(t){var e,r,o,i,s,u,a,p,c,h,l,f;if(t.preventDefault(),null===this.http)throw new Error("Please add Forms extension into http object with addExtension method.");if(r=n(t.target),a={},r.is(":submit"))o=r.closest("form"),a[r.attr("name")]=r.val()||"";else{if(!r.is("form"))return null;o=r}if(o.get(0).onsubmit&&o.get(0).onsubmit()===!1)return null;for(h=o.serializeArray(),i=l=0,f=h.length;f>l;i=++l)c=h[i],s=c.name,"undefined"==typeof a[s]?a[s]=c.value:(p=a[s],"[object Array]"!==Object.prototype.toString.call(p)&&(p=[p]),p.push(c.value),a[s]=p);return u={data:a,type:o.attr("method")||"GET"},e=o.attr("action")||window.location.href,this.http.request(e,u)},e.prototype.detach=function(){return n(document).off("."+e.EVENTS_NAMESPACE)},e}(r),e.exports=o},{"./BaseExtension":18}],20:[function(t,e){var n,r,o,i,s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./BaseExtension"),n=null,i=function(t,e){var r;return r=n(t).attr(e),"undefined"!=typeof r&&r!==!1},o=function(t){function e(t){n=t,n(document).on("click."+e.EVENT_NAMESPACE,"a.ajax:not(.not-ajax)",function(t){return function(r){var o,s,u;if(r.preventDefault(),null===t.http)throw new Error("Please add Links extension into http object with addExtension method.");return o="a"===r.target.nodeName.toLowerCase()?n(r.target):n(r.target).closest("a"),s=o.attr("href"),u=i(o,"data-type")?o.attr("data-type").toUpperCase():"GET",t.http.isHistoryApiSupported()&&i(o,e.HISTORY_API_ATTRIBUTE)&&window.history.pushState({},null,s),t.http.request(s,{type:u})}}(this))}return u(e,t),e.HISTORY_API_ATTRIBUTE="data-history-api",e.EVENT_NAMESPACE="http-ext-links",e.prototype.detach=function(){return n(document).off("."+e.EVENT_NAMESPACE)},e}(r),e.exports=o},{"./BaseExtension":18}],21:[function(t,e){var n,r,o={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./BaseExtension"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.send=function(){return document.body.style.cursor="progress"},e.prototype.complete=function(){return document.body.style.cursor="auto"},e}(n),e.exports=r},{"./BaseExtension":18}],22:[function(t,e){var n,r,o={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./BaseExtension"),r=function(t){function e(t,e){null==t&&(t="favicon.ico"),null==e&&(e=5e3),this.start(t,e)}return i(e,t),e.HTTP_TYPE="HEAD",e.prototype.timer=null,e.prototype.offline=!1,e.prototype.start=function(t,n){return null==t&&(t="favicon.ico"),null==n&&(n=5e3),this.timer=window.setInterval(function(n){return function(){var r;if(null===n.http)throw new Error("Please add Offline extension into http object with addExtension method.");return r={type:e.HTTP_TYPE,data:{r:Math.floor(1e9*Math.random())}},n.http.request(t,r).then(function(t){if(t.status>=200&&t.status<=300||304===t.status){if(n.offline)return n.offline=!1,n.http.emit("connected")}else if(!n.offline)return n.offline=!0,n.http.emit("disconnected")})["catch"](function(){return n.offline?void 0:(n.offline=!0,n.http.emit("disconnected"))})}}(this),n)},e.prototype.stop=function(){return null!==this.timer&&(window.clearInterval(this.timer),this.timer=null),this},e}(n),e.exports=r},{"./BaseExtension":18}],23:[function(t,e){var n,r,o={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./BaseExtension"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.success=function(t){return"undefined"!=typeof t.data.redirect?window.location.href=t.data.redirect:void 0},e}(n),e.exports=r},{"./BaseExtension":18}],24:[function(t,e){var n,r,o,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./BaseExtension"),o=function(t,e){var n;return n=t.getAttribute(e),null!==n&&"undefined"!=typeof n&&n!==!1},r=function(t){function e(){return this.success=i(this.success,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.APPEND_ATTRIBUTE="data-append",e.prototype.success=function(t){var n,r,i,s,u;if("undefined"!=typeof t.data.snippets){s=t.data.snippets,u=[];for(i in s)r=s[i],n=document.getElementById(i),o(n,e.APPEND_ATTRIBUTE)?u.push(this.appendSnippet(n,r)):u.push(this.updateSnippet(n,r));return u}},e.prototype.updateSnippet=function(t,e){return t.innerHTML=e},e.prototype.appendSnippet=function(t,e){return t.innerHTML+=e},e}(n),e.exports=r},{"./BaseExtension":18}],25:[function(t,e){var n;n=function(){function t(){}return t.urlencode=function(t){return t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/\~/g,"%7E").replace(/%20/g,"+")},t.buildQuery=function(t){var e,n,r,o,i,s,u;if(o=[],e=function(t,e){return e="function"==typeof e?e():null===e?"":e,o.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},n=function(t,r){var o,i,s,u,a,p,c;if("[object Array]"===Object.prototype.toString.call(r)){for(p=[],o=u=0,a=r.length;a>u;o=++u)s=r[o],/\[\]$/.test(t)===!0?p.push(e(t,s)):p.push(n(t+"["+("object"==typeof s?o:"")+"]",s));return p}if("[object Object]"===Object.prototype.toString.call(r)){c=[];for(i in r)s=r[i],c.push(n(t+"["+i+"]",s));return c}return e(t,r)},"[object Array]"===Object.prototype.toString.call(t))for(r=s=0,u=t.length;u>s;r=++s)i=t[r],e(r,i);else for(r in t)i=t[r],n(r,i);return o.join("&").replace(/%20/g,"+")},t}(),e.exports=n},{}],26:[function(t,e){var n,r,o;n=t("./_Http"),r=function(){var e;return e=new n,e.Helpers=t("./Helpers"),e.Xhr=t("./Xhr"),e._Q=t("q"),e.Extensions={Forms:t("./Extensions/Forms"),Links:t("./Extensions/Links"),Loading:t("./Extensions/Loading"),Redirect:t("./Extensions/Redirect"),Snippets:t("./Extensions/Snippets"),Offline:t("./Extensions/Offline")},e.Mocks={Http:t("./Mocks/Http")},e},o=r(),o.createInstance=r,e.exports=o},{"./Extensions/Forms":19,"./Extensions/Links":20,"./Extensions/Loading":21,"./Extensions/Offline":22,"./Extensions/Redirect":23,"./Extensions/Snippets":24,"./Helpers":25,"./Mocks/Http":27,"./Xhr":33,"./_Http":34,q:16}],27:[function(t,e){var n,r,o,i,s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=t("./Request"),r=t("../_Http"),i=function(t,e,n,r,i,s,u,a,p){var c,h;return null==u&&(u={}),null==a&&(a=200),null==p&&(p=null),"undefined"==typeof u["content-type"]&&(u["content-type"]="text/plain"),null===u["content-type"].match(/application\/json/)&&null===this.jsonPrefix||"[object Array]"!==(h=Object.prototype.toString.call(s))&&"[object Object]"!==h||(s=JSON.stringify(s)),c=new o(t,e,n,r,i),c.on("afterSend",function(){var t,e;for(t in u)e=u[t],c.xhr.setResponseHeader(t,e);return c.xhr.receive(a,s,p)}),c},n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this._originalCreateRequest=this.createRequest}return u(e,t),e.prototype._originalCreateRequest=null,e.prototype.receive=function(t,e,n,r){return null==t&&(t=""),null==e&&(e={}),null==n&&(n=200),null==r&&(r=null),this.createRequest=function(o,s,u,a,p){return i(o,s,u,a,p,t,e,n,r)}},e.prototype.receiveDataFromRequestAndSendBack=function(t,e,n){return null==t&&(t={}),null==e&&(e=200),null==n&&(n=null),this.createRequest=function(r,o,s,u,a){return i(r,o,s,u,a,s,t,e,n)}},e.prototype.receiveError=function(t){return this.createRequest=function(e,n,r,i,s){var u;return u=new o(e,n,r,i,s),u.on("afterSend",function(){return u.xhr.receiveError(t)}),u}},e.prototype.restore=function(){return this.createRequest=this._originalCreateRequest},e}(r),e.exports=n},{"../_Http":34,"./Request":28}],28:[function(t,e){var n,r,o,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("../Request"),o=t("./Xhr"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.createXhr=function(t,e,n,r,i){return new o(t,e,n,r,i)},e}(n),e.exports=r},{"../Request":31,"./Xhr":29}],29:[function(t,e){var n,r,o,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("../Xhr"),o=t("../../external/XmlHttpRequest"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.createXhr=function(){return new o},e.prototype.receive=function(t,e,n){return null==n&&(n=null),this.xhr.receive(t,e,n)},e.prototype.receiveError=function(t){return this.xhr.err(t)},e.prototype.setResponseHeader=function(t,e){return this.xhr.setResponseHeader(t,e)},e}(n),e.exports=r},{"../../external/XmlHttpRequest":1,"../Xhr":33}],30:[function(t,e){var n,r,o,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("events").EventEmitter,r=t("q"),o=function(t){function e(){this.requests=[]}return s(e,t),e.prototype.requests=null,e.prototype.running=!1,e.prototype.hasWritableRequests=function(){var t,e,n,r,o;if(this.running)for(r=this.requests,e=0,n=r.length;n>e;e++)if(t=r[e],"PUT"===(o=t.request.type)||"POST"===o||"DELETE"===o)return!0;return!1},e.prototype.getCurrentRequest=function(){return 0===this.requests.length?null:this.requests[0].request},e.prototype.addAndSend=function(t){var e;return this.emit("add",t),e=r.defer(),this.requests.push({request:t,fn:function(t,n){return t?e.reject(t):e.resolve(n)}}),this.running||this.run(),e.promise},e.prototype.next=function(){return this.requests.shift(),this.requests.length>0?(this.emit("next",this.requests[0].request),this.run()):(this.running=!1,this.emit("finish"))},e.prototype.run=function(){var t,e,n;if(0===this.requests.length)throw new Error("No pending requests");
return this.running=!0,t=this.requests[0],n=t.request,e=t.fn,this.emit("send",n),n.send().then(function(t){return function(n){return e(null,n),t.next()}}(this))["catch"](function(t){return function(n){return e(n,null),t.next()}}(this))},e.prototype.removePending=function(){var t;return this.running?(t=this.requests[0],this.requests=[t]):this.requests=[],this},e.prototype.stop=function(){return this.running&&this.getCurrentRequest().abort(),this.requests=[],this},e}(n),e.exports=o},{events:3,q:16}],31:[function(t,e){var n,r,o,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=t("./Xhr"),n=t("events").EventEmitter,r=function(t){function e(t,n,r,o,i){var s;if(this.url=t,this.type=null!=n?n:"GET",this.data=null!=r?r:null,this.jsonp=null!=o?o:!1,this.jsonPrefix=null!=i?i:null,e.__super__.constructor.apply(this,arguments),this.type=this.type.toUpperCase(),"GET"!==(s=this.type)&&"POST"!==s&&"PUT"!==s&&"DELETE"!==s&&"HEAD"!==s&&"CONNECT"!==s&&"OPTIONS"!==s&&"TRACE"!==s)throw new Error("Http request: type must be GET, POST, PUT, DELETE, HEAD, CONNECT, OPTIONS or TRACE, "+this.type+" given");this.xhr=this.createXhr(this.url,this.type,this.data,this.jsonp,this.jsonPrefix),this.response=this.xhr.response,this.xhr.on("send",function(t){return function(e){return t.emit("send",e,t)}}(this)),this.xhr.on("afterSend",function(t){return function(e){return t.emit("afterSend",e,t)}}(this)),this.xhr.on("success",function(t){return function(e){return t.emit("success",e,t)}}(this)),this.xhr.on("error",function(t){return function(e,n){return t.emit("error",e,n,t)}}(this)),this.xhr.on("complete",function(t){return function(e,n){return t.emit("complete",e,n,t)}}(this)),this.xhr.on("abort",function(t){return function(e){return t.emit("abort",e)}}(this))}return s(e,t),e.prototype.url=null,e.prototype.type="GET",e.prototype.data=null,e.prototype.jsonp=null,e.prototype.xhr=null,e.prototype.response=null,e.prototype.jsonPrefix=null,e.prototype.aborted=!1,e.prototype.createXhr=function(t,e,n,r,i){return new o(t,e,n,r,i)},e.prototype.setHeader=function(t,e){return this.xhr.setHeader(t,e)},e.prototype.send=function(){return this.xhr.send()},e.prototype.abort=function(){return this.xhr.abort()},e.prototype.getHeaders=function(){return this.xhr.getHeaders()},e.prototype.getHeader=function(t){return this.xhr.getHeader(t)},e.prototype.setHeader=function(t,e){return this.xhr.setHeader(t,e)},e.prototype.setMimeType=function(t){return this.xhr.setMimeType(t)},e}(n),e.exports=r},{"./Xhr":33,events:3}],32:[function(t,e){var n;n=function(){function t(){}return t.prototype.state=0,t.prototype.status=null,t.prototype.statusText=null,t.prototype.rawData=null,t.prototype.data=null,t.prototype.xml=null,t.prototype.error=null,t}(),e.exports=n},{}],33:[function(require,module,exports){var EventEmitter,Helpers,Q,Response,Xhr,escape,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Helpers=require("./Helpers"),Response=require("./Response"),EventEmitter=require("events").EventEmitter,Q=require("q"),escape=require("escape-regexp"),Xhr=function(_super){function Xhr(url,type,data,jsonp,jsonPrefix){var method;this.url=url,this.type=null!=type?type:"GET",this.data=null!=data?data:null,this.jsonp=null!=jsonp?jsonp:!1,this.jsonPrefix=null!=jsonPrefix?jsonPrefix:null,this.response=new Response,Xhr.COUNTER++,this.jsonp!==!1&&(this.jsonp===!0&&(this.jsonp="callback"),method=Xhr.JSONP_METHOD_PREFIX+Xhr.COUNTER,this.url+=-1!==this.url.indexOf("?")?"&":"?",this.url+=this.jsonp+"="+method,window[method]=function(t){return function(e){return t.response.data=e}}(this)),null!==this.data&&(this.data=Helpers.buildQuery(this.data),"POST"!==this.type&&(this.url+=-1!==this.url.indexOf("?")?"&":"?",this.url+=this.data)),this.xhr=this.createXhr(),this.xhr.open(this.type,this.url,!0),null===this.url.match(/^(http)s?\:\/\//)&&this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===this.type&&this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.onreadystatechange=function(_this){return function(){var contentType,error,isSuccess,prefix;return _this.response.state=_this.xhr.readyState,4===_this.response.state?(_this.response.status=_this.xhr.status,isSuccess=_this.response.status>=200&&_this.response.status<300||304===_this.response.status,isSuccess?(204===_this.response.status||"HEAD"===_this.type?_this.response.statusText="nocontent":304===_this.response.status?_this.response.statusText="notmodified":(_this.response.statusText=_this.xhr.statusText,_this.response.rawData=_this.xhr.responseText,_this.response.xml=_this.xhr.responseXML,_this.response.data=_this.xhr.responseText,contentType=_this.xhr.getResponseHeader("content-type"),null===contentType||null===contentType.match(/application\/json/)&&null===_this.jsonPrefix||(data=_this.response.data,null!==_this.jsonPrefix&&(prefix=escape(_this.jsonPrefix),data=data.replace(new RegExp("^"+prefix),"")),_this.response.data=JSON.parse(data)),null===contentType||null===contentType.match(/text\/javascript/)&&null===contentType.match(/application\/javascript/)||!_this.jsonp||eval(_this.response.data)),_this.emit("success",_this.response)):(error=new Error("Can not load "+url+" address"),error.response=_this.response,_this.emit("error",error,_this.response))):void 0}}(this)}return __extends(Xhr,_super),Xhr.JSONP_METHOD_PREFIX="__browser_http_jsonp_callback_",Xhr.COUNTER=0,Xhr.prototype.xhr=null,Xhr.prototype.response=null,Xhr.prototype.url=null,Xhr.prototype.type="GET",Xhr.prototype.data=null,Xhr.prototype.jsonp=!1,Xhr.prototype.jsonPrefix=null,Xhr.prototype.createXhr=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},Xhr.prototype.getHeaders=function(){return this.xhr.getAllResponseHeaders()},Xhr.prototype.getHeader=function(t){return this.xhr.getResponseHeader(t)},Xhr.prototype.setHeader=function(t,e){return this.xhr.setRequestHeader(t,e),this},Xhr.prototype.setMimeType=function(t){return this.xhr.overrideMimeType(t),this},Xhr.prototype.send=function(){var t;return t=Q.defer(),this.emit("send",this.response),this.on("success",function(e){return function(n){return e.emit("complete",null,n),t.resolve(n)}}(this)),this.on("error",function(e){return function(n,r){return e.emit("complete",n,r),t.reject(n)}}(this)),this.xhr.send(this.data),this.emit("afterSend",this.response),t.promise},Xhr.prototype.abort=function(){return this.xhr.abort(),this.emit("abort",this.response),this},Xhr}(EventEmitter),module.exports=Xhr},{"./Helpers":25,"./Response":32,"escape-regexp":2,events:3,q:16}],34:[function(t,e){var n,r,o,i,s,u,a={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c=[].slice;u=t("./Request"),s=t("./Queue"),i=t("q"),n=t("./Extensions/BaseExtension"),r=t("events").EventEmitter,o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.extensions={},this.queue=new s,this.on("send",function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.callExtensions("send",e)}}(this)),this.on("afterSend",function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.callExtensions("afterSend",e)}}(this)),this.on("complete",function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.callExtensions("complete",e)}}(this)),this.on("error",function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.callExtensions("error",e)}}(this)),this.on("success",function(t){return function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],t.callExtensions("success",e)}}(this))}return p(e,t),e.prototype.extensions=null,e.prototype.queue=null,e.prototype.historyApiSupported=null,e.prototype.useQueue=!0,e.prototype.options={type:"GET",jsonPrefix:null,parallel:!0},e.prototype.createRequest=function(t,e,n,r,o){return new u(t,e,n,r,o)},e.prototype.request=function(t,e){var n,r;return null==e&&(e={}),"undefined"==typeof e.type&&(e.type=this.options.type),"undefined"==typeof e.data&&(e.data=null),"undefined"==typeof e.jsonp&&(e.jsonp=!1),"undefined"==typeof e.jsonPrefix&&(e.jsonPrefix=this.options.jsonPrefix),"undefined"==typeof e.parallel&&(e.parallel=this.options.parallel),n=this.createRequest(t,e.type,e.data,e.jsonp,e.jsonPrefix),n.on("send",function(t){return function(e,n){return t.emit("send",e,n)}}(this)),n.on("afterSend",function(t){return function(e,n){return t.emit("afterSend",e,n)}}(this)),n.on("success",function(t){return function(e,n){return t.emit("success",e,n)}}(this)),n.on("error",function(t){return function(e,n,r){return t.emit("error",e,n,r)}}(this)),n.on("complete",function(t){return function(e,n,r){return t.emit("complete",e,n,r)}}(this)),this.useQueue&&("PUT"===(r=e.type)||"POST"===r||"DELETE"===r||e.parallel===!1||this.queue.hasWritableRequests())?this.queue.addAndSend(n):n.send()},e.prototype.get=function(t,e){return null==e&&(e={}),e.type="GET",this.request(t,e)},e.prototype.post=function(t,e){return null==e&&(e={}),e.type="POST",this.request(t,e)},e.prototype.put=function(t,e){return null==e&&(e={}),e.type="PUT",this.request(t,e)},e.prototype["delete"]=function(t,e){return null==e&&(e={}),e.type="DELETE",this.request(t,e)},e.prototype.getJson=function(t,e){return null==e&&(e={}),this.request(t,e).then(function(t){return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),i.resolve(t)})},e.prototype.postJson=function(t,e){return null==e&&(e={}),e.type="POST",this.request(t,e).then(function(t){return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),i.resolve(t)})},e.prototype.jsonp=function(t,e){return null==e&&(e={}),"undefined"==typeof e.jsonp&&(e.jsonp=!0),this.get(t,e)},e.prototype.isHistoryApiSupported=function(){return this.historyApiSupported&&(this.historyApiSupported=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/)),this.historyApiSupported},e.prototype.addExtension=function(t,e){return e instanceof n&&e.setHttp(this),this.extensions[t]=e,this},e.prototype.removeExtension=function(t){if("undefined"==typeof this.extensions[t])throw new Error("Extension "+t+" does not exists");return delete this.extensions[t],this},e.prototype.callExtensions=function(t,e){var n,r,o,i;o=this.extensions,i=[];for(r in o)n=o[r],"undefined"!=typeof n[t]?i.push(n[t].apply(n[t],e)):i.push(void 0);return i},e}(r),e.exports=o},{"./Extensions/BaseExtension":18,"./Queue":30,"./Request":31,events:3,q:16}]},{},[17]);